<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity4">
<head>
    <div th:replace="fragments/header :: header-css"/>
</head>
<body>

<div th:replace="fragments/header :: header"/>

<div class="container">

    <h1 th:text="${post.title}">Title</h1>
    <!--<div th:text="'Created: ' + ${post.createDate} + ' by ' + ${post.user.username}">Created by User</div>-->
    <div th:text="'Created: ' + ${#dates.format(post.createDate, 'dd-MMM-yyyy')} + ' by '">Created by</div>
    <div><a th:text="${post.user.username}" th:href="@{'/blog/' + ${post.user.username}}">User</a></div>
    <h3 th:text="${post.body}">Body</h3>

    <!--Only show these buttons if the user is the owner of post-->
    <div sec:authorize="isAuthenticated()" th:if="${username}">
        <a th:href="@{'/editPost/{id}'(id=${post.id})}">
            <button type="button" class="btn btn-primary" th:text="Edit">Edit</button>
        </a>

        <form action="#" th:action="@{'/post/{id}'(id=${post.id})}" th:method="delete"
        >
            <input type="hidden" name="_method" value="delete"/>
            <button type="submit" class="btn btn-danger" th:text="Delete">Delete</button>
        </form>
    </div>
</div>
<!-- /.container -->

<div th:replace="fragments/footer :: footer"/>

</body>
</html>